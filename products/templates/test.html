        <section class="htc__product__details bg__white ptb--70">
            <!-- Start Product Details Top -->
            <div class="htc__product__details__top">
                <div class="container">
                    <div class="row">
                    <div class="col-md-5 col-lg-5 col-sm-12 col-xs-12">
                        <div class="htc__product__details__tab__content">
                            <!-- Start Product Big Images -->
                            <div class="product__big__images">
                                <div class="portfolio-full-image">
                                    <div class="product-images">
                                        <div class="main-image" id="mainImage">
                                            <!-- Display the main product image -->
                                            <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                        </div>
                                        <!-- Navigation buttons for previous and next -->
                                        <button onclick="previousSlide()" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%);">Previous</button>
                                        <button onclick="nextSlide()" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);">Next</button>
                                    </div>
                                </div>
                            </div>
                            <!-- End Product Big Images -->

                            <!-- Thumbnail Images Slider -->
                            <div class="product-thumbnails-slider">
                                <button onclick="previousThumbnail()" class="thumbnail-nav prev">&#10094;</button>
                                <div class="thumbnail-container">
                                    <div class="thumbnails-wrapper">
                                        <!-- Loop through ExtraImages model to display thumbnails -->
                                        <div class="thumbnail">
                                            <img src="{{ product.image.url }}" alt="{{ product.name }} Thumbnail" onclick="changeMainImage('{{ product.image.url }}')">
                                        </div>
                                        {% for extra_image in product.extra_images.all %}
                                        <div class="thumbnail">
                                            <img src="{{ extra_image.image.url }}" alt="{{ product.name }} Thumbnail" onclick="changeMainImage('{{ extra_image.image.url }}')">
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <button onclick="nextThumbnail()" class="thumbnail-nav next">&#10095;</button>
                            </div>
                        </div>
                    </div>

                    <script>
                        let currentIndex = 1; // Start with the first cloned element
                        const thumbnailsWrapper = document.querySelector('.thumbnails-wrapper');
                        const thumbnailItems = document.querySelectorAll('.thumbnail');
                        const totalThumbnails = thumbnailItems.length;

                        // Clone the first and last thumbnails for the looping effect
                        const firstThumbnail = thumbnailItems[0].cloneNode(true);
                        const lastThumbnail = thumbnailItems[totalThumbnails - 1].cloneNode(true);

                        thumbnailsWrapper.appendChild(firstThumbnail);
                        thumbnailsWrapper.insertBefore(lastThumbnail, thumbnailsWrapper.firstChild);

                        function nextThumbnail() {
                            currentIndex++;
                            updateThumbnailPosition();
                            if (currentIndex === totalThumbnails + 1) {
                                // If we've moved past the original last thumbnail, reset to the first
                                setTimeout(() => {
                                    thumbnailsWrapper.style.transition = 'none';
                                    currentIndex = 1;
                                    updateThumbnailPosition();
                                }, 300);
                            }
                        }

                        function previousThumbnail() {
                            currentIndex--;
                            updateThumbnailPosition();
                            if (currentIndex === 0) {
                                // If we've moved past the original first thumbnail, reset to the last
                                setTimeout(() => {
                                    thumbnailsWrapper.style.transition = 'none';
                                    currentIndex = totalThumbnails;
                                    updateThumbnailPosition();
                                }, 300);
                            }
                        }

                        function updateThumbnailPosition() {
                            const thumbnailWidth = thumbnailItems[0].clientWidth + 10; // Adding margin or gap if present
                            const offset = currentIndex * thumbnailWidth;
                            thumbnailsWrapper.style.transition = 'transform 0.3s ease';
                            thumbnailsWrapper.style.transform = `translateX(-${offset}px)`;
                        }

                        function changeMainImage(imageUrl) {
                            const mainImageElement = document.getElementById('mainImage').querySelector('img');
                            mainImageElement.src = imageUrl;
                        }
                    </script>

                    <style>
                        .main-image {
                            width: 100%;
                            height: auto;
                            overflow: hidden;
                            position: relative;
                        }

                        .main-image img {
                            width: 100%;
                            height: auto;
                            display: block;
                        }

                        .product-thumbnails-slider {
                            display: flex;
                            align-items: center;
                            justify-content: space-between;
                            margin-top: 10px;
                        }

                        .thumbnail-container {
                            overflow: hidden;
                            width: 80%;
                        }

                        .thumbnails-wrapper {
                            display: flex;
                            gap: 10px;
                            transition: transform 0.3s ease;
                        }

                        .thumbnail {
                            flex: 0 0 auto; /* Make each thumbnail take up its own space */
                            cursor: pointer;
                        }

                        .thumbnail img {
                            width: 100px; /* Adjust the width as needed */
                            height: auto;
                            display: block;
                        }

                        .thumbnail-nav {
                            background-color: transparent;
                            border: none;
                            cursor: pointer;
                            font-size: 24px;
                            padding: 5px;
                        }

                        .thumbnail-nav.prev {
                            margin-right: 5px;
                        }

                        .thumbnail-nav.next {
                            margin-left: 5px;
                        }
                    </style>


                        <div class="col-md-7 col-lg-7 col-sm-12 col-xs-12 smt-40 xmt-40">
                            <div class="ht__product__dtl">
                                <h2 id="product-name">{{ product.name }}</h2>
                                <h2 id="product-title">{{ product.title }}</h2>
                                <ul class="rating">
                                    <li><i class="icon-star icons"></i></li>
                                    <li><i class="icon-star icons"></i></li>
                                    <li><i class="icon-star icons"></i></li>
                                    <li class="old"><i class="icon-star icons"></i></li>
                                    <li class="old"><i class="icon-star icons"></i></li>
                                </ul>
                                <ul  class="pro__prize">
                                    <li class="old__prize"> &#8377;  {{ product.old_price }}</li>
                                    <li id="product-price">&#8377; {{ product.price }}</li>
                                </ul>
                                    <form method="post" id="add-to-cart-form" style="display:none;">
                                        {% csrf_token %}
                                        <input type="hidden" name="product_id" value="{{ product.pid }}">
                                    </form>
                                <div class="ht__pro__desc">
                                    <div class="sin__desc">
                                        <p><span>Availability:</span> In Stock</p>
                                    </div>
                                    <div class="sin__desc align--left">
                                        <p><span  style="margin-right: 10px;">Color:</span></p>

                                        <ul class="pro__variants">
                                            {% for variant in product.variants.all %}
                                                <li class="variant">
                                                    <a href="#">
                                                        <img src="{{ variant.image.url }}" alt="{{ variant.color }}" width="50" height="50">
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    <div class="sin__desc align--left">
                                        <p><span>size</span></p>
                                        <select class="select__size">
                                            <option>s</option>
                                            <option>l</option>
                                            <option>xs</option>
                                            <option>xl</option>
                                            <option>m</option>
                                            <option>s</option>
                                        </select>
                                    </div>
                                    <div>
                                        <ul class="product__action_2">
                                          <li>
                                            <div class="product-quantity">
                                              <div class="product-quantity">
                                                <div class="cart-plus-minus">
                                                  <input class="cart-plus-minus-box" type="number" name="quantity" value="01" min="1" id="product-quantity">

                                                </div>
                                              </div>
                                            </div>
                                          </li>

                                            <li class="ht__addto__cart">
                                                <button id="add-to-cart-btn" data-pid="{{ product.pid }}" data-url="{% url 'products:add_to_cart' product.pid %}">
                                                    <a>
                                                        Add To Cart
                                                    </a>
                                                </button>
                                            </li>
                                            <script>
                                                document.addEventListener('DOMContentLoaded', function() {
                                                    console.log("The script is loaded and running.");
                                                    var addToCartButton = document.getElementById('add-to-cart-btn');
                                                    console.log("Button element:", addToCartButton);

                                                    if (addToCartButton) {
                                                        addToCartButton.addEventListener('click', function(event) {
                                                            console.log("Button was clicked.");
                                                            event.preventDefault();
                                                            var productId = this.getAttribute('data-pid');
                                                            var url = this.getAttribute('data-url');
                                                            var quantity = document.getElementById('product-quantity').value; // Retrieve the quantity from the input field

                                                            console.log("Product ID:", productId);
                                                            console.log("URL:", url);
                                                            console.log("Quantity:", quantity); // Log the quantity to verify it's captured correctly

                                                            fetch(url, {
                                                                method: 'POST',
                                                                headers: {
                                                                    'Content-Type': 'application/json',
                                                                    'X-CSRFToken': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
                                                                },
                                                                body: JSON.stringify({ product_id: productId, quantity: quantity }) // Include quantity in the JSON payload
                                                            })
                                                            .then(response => response.json())
                                                            .then(data => {
                                                                if (data.success) {
                                                                    alert('Product added to cart. Total items: ' + data.total_items);
                                                                } else {
                                                                    alert('Failed to add product to cart: ' + data.error);
                                                                }
                                                            })
                                                            .catch(error => console.error('Error adding product to cart:', error));
                                                        });
                                                    } else {
                                                        console.log("Add to Cart button not found.");
                                                    }
                                                });

                                                </script>

                                        </ul>


                                    </div>



                                    <div class="sin__desc align--left">
                                        <p><span>Categories:</span></p>
                                        <ul class="pro__cat__list">
                                            <li><a href="#">Fashion,</a></li>
                                            <li><a href="#">Accessories,</a></li>
                                            <li><a href="#">Women,</a></li>
                                            <li><a href="#">Men,</a></li>
                                            <li><a href="#">Kid,</a></li>
                                            <li><a href="#">Mobile,</a></li>
                                            <li><a href="#">Computer,</a></li>
                                            <li><a href="#">Hair,</a></li>
                                            <li><a href="#">Clothing,</a></li>
                                        </ul>
                                    </div>
                                    <div class="sin__desc align--left">
                                        <p><span>Product tags:</span></p>
                                        <ul class="pro__cat__list">
                                            <li><a href="#">Fashion,</a></li>
                                            <li><a href="#">Accessories,</a></li>
                                            <li><a href="#">Women,</a></li>
                                            <li><a href="#">Men,</a></li>
                                            <li><a href="#">Kid,</a></li>
                                        </ul>
                                    </div>

                                    <div class="sin__desc product__share__link">
                                        <p><span>Share this:</span></p>
                                        <ul class="pro__share">
                                            <li><a href="https://twitter.com" target="_blank"><i class="icon-social-twitter icons"></i></a></li>

                                            <li><a href="https://www.instagram.com" target="_blank"><i class="icon-social-instagram icons"></i></a></li>

                                            <li><a href="https://www.facebook.com" target="_blank"><i class="icon-social-facebook icons"></i></a></li>

                                            <li><a href="https://plus.google.com/" target="_blank"><i class="icon-social-google icons"></i></a></li>

                                            <li><a href="#" target="_blank"><i class="icon-social-linkedin icons"></i></a></li>

                                            <li><a href="#" target="_blank"><i class="icon-social-pinterest icons"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                           <!--     <section class="htc__product__area pb--70">
            <div class="container">
                <div class="row">

                </div>
                <div class="row">
                    <div class="product__wrap activation__style--1 owl-carousel owl-theme clearfix">
                         333Start Single Product 333
                        <div class="col-md-3 col-lg-3 col-sm-6 col-xs-12">
                            <div class="product">
                                    <div class="extra-images">
                                    {% for extra_image in product.extra_images.all %}
                                        <img src="{{ extra_image.image.url }}" alt="{{ product.name }} Extra Image" class="extra-image">
                                    {% endfor %}
                                </div>

                                </div>
                                <div class="product__inner">

                            </div>
                        </div>
                        3333 End Single Product 3333
                    </div>
                </div>
            </div>
        </section>-->



                    </div>
                </div>
            </div>

            <!-- End Product Details Top -->
        </section>





        <section class="htc__product__details bg__white ptb--70">
    <!-- Start Product Details Top -->
    <div class="htc__product__details__top">
        <div class="container">
            <div class="row">
                <div class="col-md-5 col-lg-5 col-sm-12 col-xs-12">
                    <div class="htc__product__details__tab__content">
                        <!-- Start Product Big Images -->
                        <div class="product__big__images">
                            <div class="portfolio-full-image">
                                <div class="product-images">
                                    <div class="main-image" id="mainImage">
                                        <!-- Display the main product image -->
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                    </div>
                                    <!-- Navigation buttons for previous and next -->
                                    <button onclick="previousSlide()" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%);">Previous</button>
                                    <button onclick="nextSlide()" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);">Next</button>
                                </div>
                            </div>
                        </div>
                        <!-- End Product Big Images -->

                        <!-- Thumbnail Images Slider -->
                            <div class="product-thumbnails-slider">
                                <button onclick="previousThumbnail()" class="thumbnail-nav prev">&#10094;</button>
                                <div class="thumbnail-container">
                                    <div class="thumbnails-wrapper" id="thumbnailsWrapper">
                                        <!-- Display Main Product Extra Images initially -->
                                        {% for extra_image in product.extra_images.all %}
                                        <div class="thumbnail">
                                            <img src="{{ extra_image.image.url }}" alt="{{ product.name }} Extra Image" onclick="changeMainImage('{{ extra_image.image.url }}')">
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <button onclick="nextThumbnail()" class="thumbnail-nav next">&#10095;</button>
                            </div>
                    </div>
                </div>

                <script>
                    let currentIndex = 1; // Start with the first cloned element
                    const thumbnailsWrapper = document.querySelector('.thumbnails-wrapper');
                    const thumbnailItems = document.querySelectorAll('.thumbnail');
                    const totalThumbnails = thumbnailItems.length;

                    // Clone the first and last thumbnails for the looping effect
                    const firstThumbnail = thumbnailItems[0].cloneNode(true);
                    const lastThumbnail = thumbnailItems[totalThumbnails - 1].cloneNode(true);

                    thumbnailsWrapper.appendChild(firstThumbnail);
                    thumbnailsWrapper.insertBefore(lastThumbnail, thumbnailsWrapper.firstChild);

                    function nextThumbnail() {
                        currentIndex++;
                        updateThumbnailPosition();
                        if (currentIndex === totalThumbnails + 1) {
                            setTimeout(() => {
                                thumbnailsWrapper.style.transition = 'none';
                                currentIndex = 1;
                                updateThumbnailPosition();
                            }, 300);
                        }
                    }

                    function previousThumbnail() {
                        currentIndex--;
                        updateThumbnailPosition();
                        if (currentIndex === 0) {
                            setTimeout(() => {
                                thumbnailsWrapper.style.transition = 'none';
                                currentIndex = totalThumbnails;
                                updateThumbnailPosition();
                            }, 300);
                        }
                    }

                    function updateThumbnailPosition() {
                        const thumbnailWidth = thumbnailItems[0].clientWidth + 10;
                        const offset = currentIndex * thumbnailWidth;
                        thumbnailsWrapper.style.transition = 'transform 0.3s ease';
                        thumbnailsWrapper.style.transform = `translateX(-${offset}px)`;
                    }

                    function changeToVariant(imageUrl, name, price, title) {
                        const mainImageElement = document.getElementById('mainImage').querySelector('img');
                        mainImageElement.src = imageUrl;
                        document.getElementById('product-name').innerText = name;
                        document.getElementById('product-price').innerText = '₹ ' + price;
                        document.getElementById('product-title').innerText = title;

                        extraImages.forEach(imgUrl => {
                            const thumbnailDiv = document.createElement('div');
                            thumbnailDiv.classList.add('thumbnail');
                            thumbnailDiv.innerHTML = `<img src="${imgUrl}" alt="${name} Variant Image" onclick="changeMainImage('${imgUrl}')">`;
                            thumbnailsWrapper.appendChild(thumbnailDiv);
                        });
                    }
                </script>

                <style>
                    .main-image {
                        width: 100%;
                        height: auto;
                        overflow: hidden;
                        position: relative;
                    }

                    .main-image img {
                        width: 100%;
                        height: auto;
                        display: block;
                    }

                    .product-thumbnails-slider {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        margin-top: 10px;
                    }

                    .thumbnail-container {
                        overflow: hidden;
                        width: 80%;
                    }

                    .thumbnails-wrapper {
                        display: flex;
                        gap: 10px;
                        transition: transform 0.3s ease;
                    }

                    .thumbnail {
                        flex: 0 0 auto;
                        cursor: pointer;
                    }

                    .thumbnail img {
                        width: 100px;
                        height: auto;
                        display: block;
                    }

                    .thumbnail-nav {
                        background-color: transparent;
                        border: none;
                        cursor: pointer;
                        font-size: 24px;
                        padding: 5px;
                    }

                    .thumbnail-nav.prev {
                        margin-right: 5px;
                    }

                    .thumbnail-nav.next {
                        margin-left: 5px;
                    }
                </style>

                <div class="col-md-7 col-lg-7 col-sm-12 col-xs-12 smt-40 xmt-40">
                    <div class="ht__product__dtl">
                        <h2 id="product-name">{{ product.name }}</h2>
                        <h2 id="product-title">{{ product.title }}</h2>
                        <ul class="rating">
                            <li><i class="icon-star icons"></i></li>
                            <li><i class="icon-star icons"></i></li>
                            <li><i class="icon-star icons"></i></li>
                            <li class="old"><i class="icon-star icons"></i></li>
                            <li class="old"><i class="icon-star icons"></i></li>
                        </ul>
                        <ul class="pro__prize">
                            <li class="old__prize"> &#8377;  {{ product.old_price }}</li>
                            <li id="product-price">&#8377; {{ product.price }}</li>
                        </ul>
                        <form method="post" id="add-to-cart-form" style="display:none;">
                            {% csrf_token %}
                            <input type="hidden" name="product_id" value="{{ product.pid }}">
                        </form>
                        <div class="ht__pro__desc">
                            <div class="sin__desc">
                                <p><span>Availability:</span> In Stock</p>
                            </div>
                            <div class="sin__desc align--left">
                                <p><span style="margin-right: 10px;">Color:</span></p>
                                <ul class="pro__variants">
                                    {% for variant in product.variants.all %}
                                        <li class="variant">
                                            <a href="#">
                                                <img src="{{ variant.image.url }}" alt="{{ variant.color }}" width="50" height="50" onclick="changeToVariant('{{ variant.image.url }}', '{{ variant.product.name }}', '{{ variant.price }}', '{{ variant.product.title }}')">
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="sin__desc align--left">
                                <p><span>Size:</span></p>
                                <select class="select__size">
                                    <option>s</option>
                                    <option>l</option>
                                    <option>xs</option>
                                    <option>xl</option>
                                    <option>m</option>
                                    <option>s</option>
                                </select>
                            </div>
                            <div>
                                <ul class="product__action_2">
                                    <li>
                                        <div class="product-quantity">
                                            <div class="cart-plus-minus">
                                                <input class="cart-plus-minus-box" type="number" name="quantity" value="01" min="1" id="product-quantity">
                                            </div>
                                        </div>
                                    </li>

                                    <li class="ht__addto__cart">
                                        <button id="add-to-cart-btn" data-pid="{{ product.pid }}" data-url="{% url 'products:add_to_cart' product.pid %}">
                                            <a>Add To Cart</a>
                                        </button>
                                    </li>
                                </ul>
                            </div>

                            <div class="sin__desc align--left">
                                <p><span>Categories:</span></p>
                                <ul class="pro__cat__list">
                                    <li><a href="#">Fashion,</a></li>
                                    <li><a href="#">Accessories,</a></li>
                                    <li><a href="#">Women,</a></li>
                                    <li><a href="#">Men,</a></li>
                                    <li><a href="#">Kid,</a></li>
                                    <li><a href="#">Mobile,</a></li>
                                    <li><a href="#">Computer,</a></li>
                                    <li><a href="#">Hair,</a></li>
                                    <li><a href="#">Clothing,</a></li>
                                </ul>
                            </div>
                            <div class="sin__desc align--left">
                                <p><span>Product tags:</span></p>
                                <ul class="pro__cat__list">
                                    <li><a href="#">Fashion,</a></li>
                                    <li><a href="#">Accessories,</a></li>
                                    <li><a href="#">Women,</a></li>
                                    <li><a href="#">Men,</a></li>
                                    <li><a href="#">Kid,</a></li>
                                </ul>
                            </div>
                            <div class="sin__desc product__share__link">
                                <p><span>Share this:</span></p>
                                <ul class="pro__share">
                                    <li><a href="https://twitter.com" target="_blank"><i class="icon-social-twitter icons"></i></a></li>
                                    <li><a href="https://www.instagram.com" target="_blank"><i class="icon-social-instagram icons"></i></a></li>
                                    <li><a href="https://www.facebook.com" target="_blank"><i class="icon-social-facebook icons"></i></a></li>
                                    <li><a href="https://plus.google.com/" target="_blank"><i class="icon-social-google icons"></i></a></li>
                                    <li><a href="#" target="_blank"><i class="icon-social-linkedin icons"></i></a></li>
                                    <li><a href="#" target="_blank"><i class="icon-social-pinterest icons"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Product Details Top -->
</section>



<section class="htc__product__details bg__white ptb--70">
    <!-- Start Product Details Top -->
    <div class="htc__product__details__top">
        <div class="container">
            <div class="row">
                <!-- Product Image Section -->
                <div class="col-md-5 col-lg-5 col-sm-12 col-xs-12">
                    <div class="htc__product__details__tab__content">
                        <!-- Start Product Big Images -->
                        <div class="product__big__images">
                            <div class="portfolio-full-image">
                                <div class="product-images">
                                    <!-- Main Product Image -->
                                    <div class="main-image" id="mainImage">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                    </div>
                                    <!-- Variant Image Section (Initially Hidden) -->
                                    <div class="main-image" id="variantImage" style="display: none;">
                                        <img src="" alt="" id="variantMainImage">
                                    </div>
                                    <!-- Navigation buttons for previous and next -->
                                    <button onclick="previousSlide()" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%);"></button>
                                    <button onclick="nextSlide()" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);"></button>
                                </div>
                            </div>
                        </div>
                        <!-- End Product Big Images -->

                        <!-- Thumbnail Images Slider -->
                        <div class="product-thumbnails-slider">
                            <div class="thumbnail-container">
                                <!-- Main Product Thumbnails -->
                                <div class="thumbnails-wrapper horizontal" id="mainProductThumbnails">
                                    <div class="thumbnail">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }} Thumbnail" onclick="changeMainImage('{{ product.image.url }}')">
                                    </div>
                                    {% for extra_image in product.extra_images.all %}
                                    <div class="thumbnail">
                                        <img src="{{ extra_image.image.url }}" alt="{{ product.name }} Extra Thumbnail" onclick="changeMainImage('{{ extra_image.image.url }}')">
                                    </div>
                                    {% endfor %}
                                </div>
                                <!-- Variant Thumbnails (Hidden Initially) -->
                                <div class="thumbnails-wrapper horizontal" id="variantThumbnails" style="display: none;">
                                    <div class="thumbnail">
                                        <img src="{{ product.variants.first.image.url }}" alt="Variant Main Thumbnail" onclick="changeMainImage('{{ product.variants.first.image.url }}', 'variant')">
                                    </div>
                                    {% for variant_image in product.variants.first.extra_images.all %}
                                    <div class="thumbnail">
                                        <img src="{{ variant_image.image.url }}" alt="Variant Extra Thumbnail" onclick="changeMainImage('{{ variant_image.image.url }}', 'variant')">
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Details Section -->
                <div class="col-md-7 col-lg-7 col-sm-12 col-xs-12 smt-40 xmt-40">
                    <div class="ht__product__dtl">
                        <!-- Main Product Details -->
                        <div id="mainProductDetails">
                            <h2 id="product-name">{{ product.name }}</h2>
                            <ul class="pro__prize">
                                <li class="old__prize">₹{{ product.old_price }}</li>
                                <li>₹{{ product.price }}</li>
                            </ul>
                        </div>

                        <!-- Variant Product Details (Initially Hidden) -->
                        <div id="variantProductDetails" style="display: none;">
                            <h2 id="variantName"></h2>
                            <ul class="pro__prize">
                                <li class="old__prize">₹<span id="variantOldPrice"></span></li>
                                <li>₹<span id="variantPrice"></span></li>
                            </ul>
                        </div>

                        <!-- Color Selection for Variants -->
                        <div class="sin__desc align--left">
                            <p><span style="margin-right: 10px;">Color:</span></p>
                            <ul class="pro__variants" style="display: flex; gap: 10px;">
                                <li class="variant">
                                    <a href="#" onclick="showMainProduct()">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}" width="50" height="50">
                                    </a>
                                </li>
                                {% for variant in product.variants.all %}
                                <li class="variant">
                                    <a href="#" onclick="showVariant('{{ variant.id }}', '{{ variant.color }}', '{{ variant.price }}', '{{ variant.old_price }}', '{{ variant.image.url }}')">
                                        <img src="{{ variant.image.url }}" alt="{{ variant.color }}" width="50" height="50">
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Function to show main product images and details
    function showMainProduct() {
        document.getElementById('mainImage').style.display = 'block';
        document.getElementById('variantImage').style.display = 'none';
        document.getElementById('mainProductDetails').style.display = 'block';
        document.getElementById('variantProductDetails').style.display = 'none';

        document.getElementById('mainProductThumbnails').style.display = 'flex';
        document.getElementById('variantThumbnails').style.display = 'none';
    }

    // Function to show variant images and details
    function showVariant(variantId, color, price, oldPrice, imageUrl) {
        document.getElementById('mainImage').style.display = 'none';
        document.getElementById('variantImage').style.display = 'block';
        document.getElementById('variantMainImage').src = imageUrl;

        document.getElementById('mainProductDetails').style.display = 'none';
        document.getElementById('variantProductDetails').style.display = 'block';
        document.getElementById('variantName').innerText = `Variant - ${color}`;
        document.getElementById('variantPrice').innerText = price;
        document.getElementById('variantOldPrice').innerText = oldPrice;

        document.getElementById('mainProductThumbnails').style.display = 'none';
        document.getElementById('variantThumbnails').style.display = 'flex';
    }

    // Function to change the main displayed image
    function changeMainImage(imageUrl, type = 'main') {
        if (type === 'variant') {
            document.getElementById('variantMainImage').src = imageUrl;
        } else {
            document.getElementById('mainImage').querySelector('img').src = imageUrl;
        }
    }
</script>

<style>
    /* Main and Variant Image Styling */
    .main-image {
        width: 100%;
        height: auto;
        overflow: hidden;
        position: relative;
    }

    .main-image img {
        width: 100%;
        height: auto;
        display: block;
    }

    /* Thumbnail display as horizontal row */
    .thumbnails-wrapper.horizontal {
        display: flex;
        flex-direction: row;
        gap: 10px;
        transition: transform 0.3s ease;
    }

    /* General styling for thumbnails */
    .thumbnail-container {
        overflow: hidden;
        width: 80%;
    }

    .thumbnail {
        flex: 0 0 auto;
        cursor: pointer;
    }

    .thumbnail img {
        width: 100px;
        height: auto;
        display: block;
    }

    /* Styling for navigation buttons */
    .thumbnail-nav {
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 24px;
        padding: 5px;
    }

    .thumbnail-nav.prev {
        margin-right: 5px;
    }

    .thumbnail-nav.next {
        margin-left: 5px;
    }
</style>





      <section class="htc__product__details bg__white ptb--70">
    <!-- Start Product Details Top -->
    <div class="htc__product__details__top">
        <div class="container">
            <div class="row">
                <!-- Product Image Section -->
                <div class="col-md-5 col-lg-5 col-sm-12 col-xs-12">
                    <div class="htc__product__details__tab__content">
                        <!-- Start Product Big Images -->
                        <div class="product__big__images">
                            <div class="portfolio-full-image">
                                <div class="product-images">
                                    <!-- Main Product Image -->
                                    <div class="main-image" id="mainImage">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                    </div>
                                    <!-- Variant Image Section (Initially Hidden) -->
                                    <div class="main-image" id="variantImage" style="display: none;">
                                        <img src="" alt="" id="variantMainImage">
                                    </div>
                                    <!-- Navigation buttons for previous and next -->
                                    <button onclick="previousSlide()" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%);"></button>
                                    <button onclick="nextSlide()" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);"></button>
                                </div>
                            </div>
                        </div>
                        <!-- End Product Big Images -->

                        <!-- Thumbnail Images Slider -->
                        <div class="product-thumbnails-slider">
                            <div class="thumbnail-container">
                                <!-- Main Product Thumbnails -->
                                <div class="thumbnails-wrapper horizontal" id="mainProductThumbnails">
                                    <div class="thumbnail">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }} Thumbnail" onclick="changeMainImage('{{ product.image.url }}')">
                                    </div>
                                    {% for extra_image in product.extra_images.all %}
                                    <div class="thumbnail">
                                        <img src="{{ extra_image.image.url }}" alt="{{ product.name }} Extra Thumbnail" onclick="changeMainImage('{{ extra_image.image.url }}')">
                                    </div>
                                    {% endfor %}
                                </div>
                                <!-- Variant Thumbnails (Hidden Initially) -->
                                <div class="thumbnails-wrapper horizontal" id="variantThumbnails" style="display: none;">
                                    <div class="thumbnail">
                                        <img src="{{ product.variants.first.image.url }}" alt="Variant Main Thumbnail" onclick="changeMainImage('{{ product.variants.first.image.url }}', 'variant')">
                                    </div>
                                    {% for variant_image in product.variants.first.extra_images.all %}
                                    <div class="thumbnail">
                                        <img src="{{ variant_image.image.url }}" alt="Variant Extra Thumbnail" onclick="changeMainImage('{{ variant_image.image.url }}', 'variant')">
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Details Section -->
                <div class="col-md-7 col-lg-7 col-sm-12 col-xs-12 smt-40 xmt-40">
                    <div class="ht__product__dtl">
                        <!-- Main Product Details -->
                        <div id="mainProductDetails">
                            <h2 id="product-name">{{ product.name }}</h2>
                            <ul class="pro__prize">
                                <li class="old__prize">₹{{ product.old_price }}</li>
                                <li>₹{{ product.price }}</li>
                            </ul>
                        </div>

                        <!-- Variant Product Details (Initially Hidden) -->
                        <div id="variantProductDetails" style="display: none;">
                            <h2 id="variantName"></h2>
                            <ul class="pro__prize">
                                <li class="old__prize">₹<span id="variantOldPrice"></span></li>
                                <li>₹<span id="variantPrice"></span></li>
                            </ul>
                        </div>

                        <!-- Color Selection for Variants -->
                        <div class="sin__desc align--left">
                            <p><span style="margin-right: 10px;">Color:</span></p>
                            <ul class="pro__variants" style="display: flex; gap: 10px;">
                                <li class="variant">
                                    <a href="#" onclick="showMainProduct()">
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}" width="50" height="50">
                                    </a>
                                </li>
                                {% for variant in product.variants.all %}
                                <li class="variant">
                                    <a href="#" onclick="showVariant('{{ variant.id }}', '{{ variant.color }}', '{{ variant.price }}', '{{ variant.old_price }}', '{{ variant.image.url }}')">
                                        <img src="{{ variant.image.url }}" alt="{{ variant.color }}" width="50" height="50">
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>

                        </div>
                        <div class="sin__desc align--left">
                                        <p><span>size</span></p>
                                        <select class="select__size">
                                            <option>s</option>
                                            <option>l</option>
                                            <option>xs</option>
                                            <option>xl</option>
                                            <option>m</option>
                                            <option>s</option>
                                        </select>
                        </div>
                        <div>
                                        <ul class="product__action_2">
                                          <li>
                                            <div class="product-quantity">
                                              <div class="product-quantity">
                                                <div class="cart-plus-minus">
                                                  <input class="cart-plus-minus-box" type="number" name="quantity" value="01" min="1" id="product-quantity">

                                                </div>
                                              </div>
                                            </div>
                                          </li>

                                            <li class="ht__addto__cart">
                                                <button id="add-to-cart-btn" data-pid="{{ product.pid }}" data-url="{% url 'products:add_to_cart' product.pid %}">
                                                    <a>
                                                        Add To Cart
                                                    </a>
                                                </button>
                                            </li>
                                            <script>
                                                document.addEventListener('DOMContentLoaded', function() {
                                                    console.log("The script is loaded and running.");
                                                    var addToCartButton = document.getElementById('add-to-cart-btn');
                                                    console.log("Button element:", addToCartButton);

                                                    if (addToCartButton) {
                                                        addToCartButton.addEventListener('click', function(event) {
                                                            console.log("Button was clicked.");
                                                            event.preventDefault();
                                                            var productId = this.getAttribute('data-pid');
                                                            var url = this.getAttribute('data-url');
                                                            var quantity = document.getElementById('product-quantity').value; // Retrieve the quantity from the input field

                                                            console.log("Product ID:", productId);
                                                            console.log("URL:", url);
                                                            console.log("Quantity:", quantity); // Log the quantity to verify it's captured correctly

                                                            fetch(url, {
                                                                method: 'POST',
                                                                headers: {
                                                                    'Content-Type': 'application/json',
                                                                    'X-CSRFToken': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
                                                                },
                                                                body: JSON.stringify({ product_id: productId, quantity: quantity }) // Include quantity in the JSON payload
                                                            })
                                                            .then(response => response.json())
                                                            .then(data => {
                                                                if (data.success) {
                                                                    alert('Product added to cart. Total items: ' + data.total_items);
                                                                } else {
                                                                    alert('Failed to add product to cart: ' + data.error);
                                                                }
                                                            })
                                                            .catch(error => console.error('Error adding product to cart:', error));
                                                        });
                                                    } else {
                                                        console.log("Add to Cart button not found.");
                                                    }
                                                });

                                                </script>

                                        </ul>


                                    </div>
                        <div class="sin__desc product__share__link">
                                        <p><span>Share this:</span></p>
                                        <ul class="pro__share">
                                            <li><a href="https://twitter.com" target="_blank"><i class="icon-social-twitter icons"></i></a></li>

                                            <li><a href="https://www.instagram.com" target="_blank"><i class="icon-social-instagram icons"></i></a></li>

                                            <li><a href="https://www.facebook.com" target="_blank"><i class="icon-social-facebook icons"></i></a></li>

                                            <li><a href="https://plus.google.com/" target="_blank"><i class="icon-social-google icons"></i></a></li>

                                            <li><a href="#" target="_blank"><i class="icon-social-linkedin icons"></i></a></li>

                                            <li><a href="#" target="_blank"><i class="icon-social-pinterest icons"></i></a></li>
                                        </ul>
                                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Function to show main product images and details
    function showMainProduct() {
        document.getElementById('mainImage').style.display = 'block';
        document.getElementById('variantImage').style.display = 'none';
        document.getElementById('mainProductDetails').style.display = 'block';
        document.getElementById('variantProductDetails').style.display = 'none';

        document.getElementById('mainProductThumbnails').style.display = 'flex';
        document.getElementById('variantThumbnails').style.display = 'none';
    }

    // Function to show variant images and details
    function showVariant(variantId, color, price, oldPrice, imageUrl) {
        document.getElementById('mainImage').style.display = 'none';
        document.getElementById('variantImage').style.display = 'block';
        document.getElementById('variantMainImage').src = imageUrl;

        document.getElementById('mainProductDetails').style.display = 'none';
        document.getElementById('variantProductDetails').style.display = 'block';
        document.getElementById('variantName').innerText = `Variant - ${color}`;
        document.getElementById('variantPrice').innerText = price;
        document.getElementById('variantOldPrice').innerText = oldPrice;

        document.getElementById('mainProductThumbnails').style.display = 'none';
        document.getElementById('variantThumbnails').style.display = 'flex';
    }

    // Function to change the main displayed image
    function changeMainImage(imageUrl, type = 'main') {
        if (type === 'variant') {
            document.getElementById('variantMainImage').src = imageUrl;
        } else {
            document.getElementById('mainImage').querySelector('img').src = imageUrl;
        }
    }
</script>

<style>
    /* Main and Variant Image Styling */
    .main-image {
        width: 100%;
        height: auto;
        overflow: hidden;
        position: relative;
    }

    .main-image img {
        width: 100%;
        height: auto;
        display: block;
    }

    /* Thumbnail display as horizontal row */
    .thumbnails-wrapper.horizontal {
        display: flex;
        flex-direction: row;
        gap: 10px;
        transition: transform 0.3s ease;
    }

    /* General styling for thumbnails */
    .thumbnail-container {
        overflow: hidden;
        width: 80%;
    }

    .thumbnail {
        flex: 0 0 auto;
        cursor: pointer;
    }

    .thumbnail img {
        width: 100px;
        height: auto;
        display: block;
    }

    /* Styling for navigation buttons */
    .thumbnail-nav {
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 24px;
        padding: 5px;
    }

    .thumbnail-nav.prev {
        margin-right: 5px;
    }

    .thumbnail-nav.next {
        margin-left: 5px;
    }
</style>



